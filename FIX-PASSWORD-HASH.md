# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å ADMIN_PASSWORD_HASH

## –ü—Ä–æ–±–ª–µ–º–∞

–í —Ñ–∞–π–ª–µ `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `ADMIN_PASSWORD_HASH` –ø—É—Å—Ç–∞—è:
```
ADMIN_PASSWORD_HASH=
```

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç `setup-env.sh` –Ω–µ –º–æ–∂–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ö–µ—à –ø–∞—Ä–æ–ª—è (–Ω–µ—Ç Node.js –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–∫—Ä–∏–ø—Ç `install.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç —ç—Ç–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ. –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:

```bash
cd /var/www/zelyonkin.ru

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ö–µ—à –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ë–î)
docker-compose exec web npm run db:force-fix-user
```

–≠—Ç–æ:
- ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π bcrypt —Ö–µ—à –¥–ª—è –ø–∞—Ä–æ–ª—è "1234"
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π name (skre4karta)

### –°–ø–æ—Å–æ–± 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à–∞ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

```bash
cd /var/www/zelyonkin.ru

# –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x generate-password-hash.sh

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ö–µ—à
./generate-password-hash.sh

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ö–µ—à –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env:
nano .env
# –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
# ADMIN_PASSWORD_HASH=<–≤—Å—Ç–∞–≤—å—Ç–µ_–ø–æ–ª—É—á–µ–Ω–Ω—ã–π_—Ö–µ—à>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose restart web
docker-compose exec web npm run db:force-fix-user
```

### –°–ø–æ—Å–æ–± 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Docker –Ω–∞–ø—Ä—è–º—É—é

```bash
cd /var/www/zelyonkin.ru

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ö–µ—à –¥–ª—è –ø–∞—Ä–æ–ª—è "1234"
HASH=$(docker run --rm node:20-slim sh -c "
    npm install bcryptjs 2>/dev/null && \
    node -e \"const bcrypt = require('bcryptjs'); console.log(bcrypt.hashSync('1234', 10))\"
" | tail -1)

# –í—ã–≤–æ–¥–∏–º —Ö–µ—à
echo "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ö–µ—à:"
echo "$HASH"

# –î–æ–±–∞–≤–ª—è–µ–º –≤ .env
if grep -q "^ADMIN_PASSWORD_HASH=$" .env; then
    sed -i "s|^ADMIN_PASSWORD_HASH=$|ADMIN_PASSWORD_HASH=$HASH|" .env
else
    echo "ADMIN_PASSWORD_HASH=$HASH" >> .env
fi

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker-compose restart web
docker-compose exec web npm run db:force-fix-user
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
docker-compose exec web npm run db:check-auth

# –¢–µ—Å—Ç –≤—Ö–æ–¥–∞
docker-compose exec web npm run db:test-login
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- ‚úÖ –ü–∞—Ä–æ–ª—å –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ –í–•–û–î –î–û–õ–ñ–ï–ù –†–ê–ë–û–¢–ê–¢–¨!

## üìù –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –≤—Ö–æ–¥–∞:
- **–õ–æ–≥–∏–Ω:** `skre4karta` –∏–ª–∏ `zelyonkin.d@gmail.com`
- **–ü–∞—Ä–æ–ª—å:** `1234`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–¥–º–∏–Ω–∫–∏!

---

**–í–µ—Ä—Å–∏—è:** 2.2.1  
**–î–∞—Ç–∞:** 2025-01-18

