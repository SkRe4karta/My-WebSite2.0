/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –æ —Å–∞–º–æ–º —Å–∞–π—Ç–µ
 * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: node scripts/add-website-project.js
 */

// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
require('dotenv').config({ path: require('path').join(__dirname, '..', '.env') });

const { PrismaClient } = require('@prisma/client');

const prisma = new PrismaClient();

async function addWebsiteProject() {
  console.log('üöÄ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –æ —Å–∞–π—Ç–µ...');

  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –ø—Ä–æ–µ–∫—Ç
    const existingProject = await prisma.project.findUnique({
      where: { slug: 'my-website-2-0' },
    });

    if (existingProject) {
      console.log('‚úÖ –ü—Ä–æ–µ–∫—Ç –æ —Å–∞–π—Ç–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
      console.log('üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞...');
      
      await prisma.project.update({
        where: { slug: 'my-website-2-0' },
        data: {
          title: 'My-WebSite 2.0',
          description: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Å–∞–π—Ç-–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Å –ø—É–±–ª–∏—á–Ω–æ–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —á–∞—Å—Ç—è–º–∏. –í–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∞–º–∏, —Ñ–∞–π–ª–∞–º–∏, –∏–¥–µ—è–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∑–∞—â–∏—Ç–æ–π, —Å–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤, API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.',
          status: 'live',
          stack: ['Next.js', 'React', 'TypeScript', 'Prisma', 'PostgreSQL', 'NextAuth', 'Tailwind CSS'],
          featured: true,
          order: 0,
          metadata: {
            features: [
              '–ü—É–±–ª–∏—á–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏',
              '–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º',
              '–°–∏—Å—Ç–µ–º–∞ –∑–∞–º–µ—Ç–æ–∫ —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º',
              '–§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä',
              '–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ (Vault)',
              '–ñ—É—Ä–Ω–∞–ª –∏–¥–µ–π',
              '–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è',
              '–°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤',
              'API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π',
              '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ'
            ],
            technologies: {
              frontend: 'Next.js 15, React 19, TypeScript',
              backend: 'Next.js API Routes',
              database: 'PostgreSQL —Å Prisma ORM',
              auth: 'NextAuth.js —Å 2FA',
              styling: 'Tailwind CSS',
              deployment: 'Docker, Nginx'
            }
          }
        },
      });
      
      console.log('‚úÖ –ü—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω');
    } else {
      console.log('üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞...');
      
      await prisma.project.create({
        data: {
          title: 'My-WebSite 2.0',
          slug: 'my-website-2-0',
          description: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Å–∞–π—Ç-–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Å –ø—É–±–ª–∏—á–Ω–æ–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —á–∞—Å—Ç—è–º–∏. –í–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∞–º–∏, —Ñ–∞–π–ª–∞–º–∏, –∏–¥–µ—è–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∑–∞—â–∏—Ç–æ–π, —Å–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤, API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.',
          status: 'live',
          stack: ['Next.js', 'React', 'TypeScript', 'Prisma', 'PostgreSQL', 'NextAuth', 'Tailwind CSS'],
          featured: true,
          order: 0,
          metadata: {
            features: [
              '–ü—É–±–ª–∏—á–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏',
              '–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º',
              '–°–∏—Å—Ç–µ–º–∞ –∑–∞–º–µ—Ç–æ–∫ —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º',
              '–§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä',
              '–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ (Vault)',
              '–ñ—É—Ä–Ω–∞–ª –∏–¥–µ–π',
              '–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è',
              '–°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤',
              'API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π',
              '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ'
            ],
            technologies: {
              frontend: 'Next.js 15, React 19, TypeScript',
              backend: 'Next.js API Routes',
              database: 'PostgreSQL —Å Prisma ORM',
              auth: 'NextAuth.js —Å 2FA',
              styling: 'Tailwind CSS',
              deployment: 'Docker, Nginx'
            }
          }
        },
      });
      
      console.log('‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!');
    }

    console.log('üéâ –ì–æ—Ç–æ–≤–æ!');
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

if (require.main === module) {
  addWebsiteProject()
    .then(() => {
      process.exit(0);
    })
    .catch((error) => {
      console.error('üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:', error);
      process.exit(1);
    });
}

module.exports = { addWebsiteProject };

