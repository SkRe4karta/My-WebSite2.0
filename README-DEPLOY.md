# Инструкция по развертыванию на VM

## Быстрый старт

### 1. Копирование проекта на сервер

```bash
# С локального компьютера
scp -r my-portfolio-site admin@82.202.138.157:~/var/www/

# На сервере переименуйте папку
ssh admin@82.202.138.157
cd ~/var/www
mv my-portfolio-site my-site
cd my-site
```

### 2. Первоначальная настройка сервера (один раз)

```bash
# Установите права на скрипты
chmod +x *.sh

# Запустите настройку сервера
./server-setup.sh

# Если Docker был установлен, выйдите и войдите снова
exit
ssh admin@82.202.138.157
cd ~/var/www/my-site
```

### 3. Автоматическая установка проекта

```bash
# Запустите единый скрипт установки
./install.sh
```

Скрипт автоматически:
- ✅ Создаст .env файл с паролем по умолчанию "1234"
- ✅ Создаст все необходимые директории
- ✅ Установит права на скрипты
- ✅ Соберет и запустит Docker контейнеры
- ✅ Выполнит миграции базы данных

### 4. Получение SSL сертификата

```bash
./setup-ssl.sh
```

### 5. Готово!

Сайт доступен по адресу: **https://zelyonkin.ru**

**Важно:** После первого входа смените пароль в настройках админки!

## Структура проекта

```
my-site/
├── install.sh          # Единый скрипт установки (ГЛАВНЫЙ)
├── server-setup.sh     # Настройка сервера (один раз)
├── setup-ssl.sh        # Получение SSL сертификата
├── backup.sh           # Резервное копирование
├── deploy.sh           # Развертывание (используется install.sh)
├── setup-env.sh        # Генерация .env
├── docker-compose.yml  # Docker Compose конфигурация
├── Dockerfile          # Docker образ
├── nginx.conf          # Конфигурация Nginx
└── ...
```

## Полезные команды

```bash
# Просмотр логов
docker-compose logs -f web

# Остановка
docker-compose down

# Перезапуск
docker-compose restart

# Бэкап
./backup.sh

# Обновление проекта
git pull  # или скопируйте новые файлы
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## Решение проблем

См. полную документацию в `RELEASE.md`

